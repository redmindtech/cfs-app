(self.webpackChunkcfs=self.webpackChunkcfs||[]).push([[623],{7623:(e,t,n)=>{"use strict";n.r(t),n.d(t,{LoadingModule:()=>It});var o=n(8583),i=n(4655),a=n(3679),l=n(3109),c=n(7716),s=n(2238),d=n(1095),r=n(8295),u=n(7441),g=n(2458);function p(e,t){1&e&&c._UZ(0,"div",7)}function m(e,t){if(1&e&&(c.TgZ(0,"div"),c._uU(1),c.qZA()),2&e){const e=c.oxw();c.xp6(1),c.Oqu(e.scannedValue)}}function h(e,t){if(1&e&&(c.TgZ(0,"mat-option",8),c._uU(1),c.qZA()),2&e){const e=t.$implicit;c.Q6J("value",e.id),c.xp6(1),c.hij(" ",e.label," ")}}let f=(()=>{class e{constructor(e){this.dialogRef=e,this.cameraFC=new a.NI,this.cameras=[],this.selectCameraLabel="Loading Camera...",this.scannedValue=""}ngOnInit(){l.t2.getCameras().then(e=>{e&&e.length&&(this.selectCameraLabel="Select Camera",this.cameras=e,this.cameraFC.setValue(this.getLastCamera(),{emitEvent:!1}),this.scan(this.cameraFC.value))}).catch(e=>{}),this.cameraFC.valueChanges.subscribe(e=>{localStorage.setItem("lastUsedCameraId",e),this.scan(e),this.scannedValue=""})}getLastCamera(){let e;try{e=localStorage.getItem("lastUsedCameraId")}catch(t){}return e=e||this.cameras[0].id,e}scan(e){var t,n,o;let i=(null===(t=document.getElementById("scanner"))||void 0===t?void 0:t.offsetWidth)?(null===(n=document.getElementById("scanner"))||void 0===n?void 0:n.offsetWidth)-100:innerWidth;(null===(o=document.getElementById("scanner"))||void 0===o?void 0:o.offsetHeight)?document.getElementById("scanner"):innerHeight,this.html5QrCode=new l.t2("scanner",!0),this.html5QrCode.start(e,{fps:10,qrbox:{width:i,height:i}},(e,t)=>{this.scannedValue=e,this.dialogRef.close(this.scannedValue)},e=>{console.log(e)}).catch(e=>{})}ngOnDestroy(){this.html5QrCode.stop().then(e=>{}).catch(e=>{})}}return e.\u0275fac=function(t){return new(t||e)(c.Y36(s.so))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-barcode-scanner-popup-loading"]],decls:10,vars:5,consts:[["id","scanner","class","w-100",4,"ngIf"],[1,"d-flex","mt-3"],["mat-raised-button","","mat-dialog-close","",1,"ml-auto"],[4,"ngIf"],[1,"w-100","mt-3"],[3,"formControl"],[3,"value",4,"ngFor","ngForOf"],["id","scanner",1,"w-100"],[3,"value"]],template:function(e,t){1&e&&(c.YNc(0,p,1,0,"div",0),c.TgZ(1,"div",1),c.TgZ(2,"button",2),c._uU(3,"Close"),c.qZA(),c.qZA(),c.YNc(4,m,2,1,"div",3),c.TgZ(5,"mat-form-field",4),c.TgZ(6,"mat-label"),c._uU(7),c.qZA(),c.TgZ(8,"mat-select",5),c.YNc(9,h,2,2,"mat-option",6),c.qZA(),c.qZA()),2&e&&(c.Q6J("ngIf",!t.scannedValue),c.xp6(4),c.Q6J("ngIf",t.scannedValue),c.xp6(3),c.Oqu(t.selectCameraLabel),c.xp6(1),c.Q6J("formControl",t.cameraFC),c.xp6(1),c.Q6J("ngForOf",t.cameras))},directives:[o.O5,d.lW,s.ZT,r.KE,r.hX,u.gD,a.JJ,a.oH,o.sg,g.ey],styles:[""]}),e})();var b=n(1841),Z=n(5917),x=n(1295),w=n(2340),_=n(8002);let C=(()=>{class e{constructor(e){this.http=e,this.devanningDataKey="devanningData"}setLocalStorage(e){window.localStorage.setItem(this.devanningDataKey,JSON.stringify(e))}getLocalStorage(){try{return JSON.parse(window.localStorage.getItem(this.devanningDataKey))}catch(e){return[]}}getContainerDetails(e){const t={headers:new b.WM({"Content-Type":"application/x-www-form-urlencoded"})},n=new URLSearchParams;let o=window.localStorage.getItem("Token");return this.http.post(`${w.N.apiUrl}/getcontainer_list?user_token=${o}&username=${e}&saas_id=LIVEFSL`,n.toString(),t).pipe((0,_.U)(e=>{try{return e}catch(t){return e}}))}saveSeal(e,t){let n=t.segment_code,o=t.job_no,i=t.container_no,a=e.actualSeal,l=e.unloadingDate;const c={headers:new b.WM({"Content-Type":"application/x-www-form-urlencoded"})},s=new URLSearchParams;let d=window.localStorage.getItem("Token");return this.http.post(`${w.N.apiUrl}/save_seal?user_token=${d}&segment_code=${n}&saas_id=LIVEFSL&job_no=${o}&container_no=${i}&house_no=&actual_seal=${a}&unloading_date=${l}`,s.toString(),c).pipe((0,_.U)(e=>{try{return e}catch(t){return e}}))}getHblDetails(e){let t=e.segment_code,n=e.job_no,o=e.container_no;const i={headers:new b.WM({"Content-Type":"application/x-www-form-urlencoded"})},a=new URLSearchParams;let l=window.localStorage.getItem("Token");return this.http.post(`${w.N.apiUrl}/gethbl_list?user_token=${l}&segment_code=${t}&saas_id=LIVEFSL&job_no=${n}&container_no=${o}`,a.toString(),i).pipe((0,_.U)(e=>{try{return e}catch(t){return e}}))}getSaveItem(e,t){let n=t.segment_code,o=e.jobNo,i=e.containerNo,a=e.hblNumber,l=e.packageType,c=e.receivedPiece,s=e.damageCondition,d=e.damageType,r=e.damageNotes,u=e.weight,g=e.cbm,p=e.subJobNo,m=e.cfsNote,h=e.landedMarks;const f={headers:new b.WM({"Content-Type":"application/x-www-form-urlencoded"})},Z=new URLSearchParams;let x=window.localStorage.getItem("Token");return this.http.post(`${w.N.apiUrl}/save_item?user_token=${x}&username=&segment_code=${n}&saas_id=LIVEFSL&job_no=${o}&container_no=${i}&house_no=${a}&package_type=${l}&received_qty=${c}&good_damage=${s}&damage_type=${d}&damage_note=${r}&weight=${u}&volume=${g}&subjob_no=${p}&cfs_note=${m}&landed_marks=${h}`,Z.toString(),f).pipe((0,_.U)(e=>{try{return e}catch(t){return e}}))}getUnloadDetails(e,t){let n=t.segment_code,o=e.selectedContainer.job_no,i=t.container_number,a=e.hblNumber;const l={headers:new b.WM({"Content-Type":"application/x-www-form-urlencoded"})},c=new URLSearchParams;let s=window.localStorage.getItem("Token");return this.http.post(`${w.N.apiUrl}/getitem_list?user_token=${s}&username=&segment_code=${n}&saas_id=LIVEFSL&job_no=${o}&container_no=${i}&house_no=${a}`,c.toString(),l).pipe((0,_.U)(e=>{try{return e}catch(t){return e}}))}deleteItem(e,t,n,o){let i=e,a=n,l=t,c=o;const s={headers:new b.WM({"Content-Type":"application/x-www-form-urlencoded"})},d=new URLSearchParams;let r=window.localStorage.getItem("Token");return this.http.post(`${w.N.apiUrl}/delete_item?user_token=${r}&username=&sl_no=${i}&segment_code=${a}&saas_id=LIVEFSL&job_no=${l}&container_no=&house_no=${c}`,d.toString(),s).pipe((0,_.U)(e=>{try{return e}catch(t){return e}}))}packType(){const e={headers:new b.WM({"Content-Type":"application/x-www-form-urlencoded"})},t=new URLSearchParams;let n=window.localStorage.getItem("Token");return this.http.post(`${w.N.apiUrl}/getpack_list?user_token=${n}&username=&saas_id=LIVEFSL&search_key=`,t.toString(),e).pipe((0,_.U)(e=>{try{return e}catch(t){return e}}))}damageType(){const e={headers:new b.WM({"Content-Type":"application/x-www-form-urlencoded"})},t=new URLSearchParams;let n=window.localStorage.getItem("Token");return this.http.post(`${w.N.apiUrl}/getdamage_list?user_token=${n}&username=&saas_id=LIVEFSL&search_key=`,t.toString(),e).pipe((0,_.U)(e=>{try{return e}catch(t){return e}}))}addUnloadEntry(e,t,n){let o=this.getLocalStorage();return o.map(o=>{o.container==e&&o.hblList.map(e=>{e.hblNumber==t&&(e.unloadEntries.push(n),e.unloaded=e.unloaded+n.receivedPiece,e.balance=e.manifestedPieces-e.unloaded)})}),this.setLocalStorage(o),(0,Z.of)({}).pipe((0,x.gw)(1e3))}uploadPhoto(e,t,n,o,i){let a=window.localStorage.getItem("Token"),l=`${w.N.apiUrl}/insert_image?master_house=${t}`;const c={user_token:a,username:"",saas_id:"LIVEFSL",segment_code:n.segment_code,container_no:n.container_number,house_no:o.hblNumber,job_no:n.job_no,file_name:(new Date).getTime(),file_content:e,subjob_no:i},s={headers:new b.WM({"Content-Type":"application/json"})};return this.http.post(l,c,s)}complete(e,t){let n=t.segment_code,o=e.selectedContainer.job_no,i=t.container_number,a=e.subjob_no;const l={headers:new b.WM({"Content-Type":"application/x-www-form-urlencoded"})},c=new URLSearchParams;let s=window.localStorage.getItem("Token");return this.http.post(`${w.N.apiUrl}/complete_devanning?user_token=${s}&segment_code=${n}&saas_id=LIVEFSL&job_no=${o}&container_no=${i}&subjob_no=${a}`,c.toString(),l).pipe((0,_.U)(e=>{try{return e}catch(t){return e}}))}labelPrint(e,t,n){let o=t.fse_number,i=n.hblNumber,a=e.eta,l=t.pod_text,c=e.unload,s=e.numberOfPakages;const d={headers:new b.WM({"Content-Type":"application/x-www-form-urlencoded"})},r=new URLSearchParams;let u=window.localStorage.getItem("Token");return this.http.post(`${w.N.apiUrl}/labelprint_devanning?user_token=${u}&saas_id=LIVEFSL&fsc=${o}&hbl=${i}&eta=${a}&pod=${l}&no_of_label=${c}&pcktype=${s}`,r.toString(),d).pipe((0,_.U)(e=>{try{return e}catch(t){return e}}))}}return e.\u0275fac=function(t){return new(t||e)(c.LFG(b.eN))},e.\u0275prov=c.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),v=(()=>{class e{constructor(e,t,n,o){this.dialogRef=e,this.data=t,this.dialog=n,this.devanningApiService=o}ngOnInit(){this.selectedContainer=this.data}}return e.\u0275fac=function(t){return new(t||e)(c.Y36(s.so),c.Y36(s.WI),c.Y36(s.uw),c.Y36(C))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-container-details-popup-loading"]],decls:16,vars:9,consts:[[1,"cfs-title1","pb-2","text-primary"],[1,"pb-3","text-primary"],[1,"pb-2","color1","text-white","pl-2","pt-2"],[1,"pb-2","color","pl-2","pt-2"],[1,"pb-3","color","pl-2","pt-2"],[1,"d-flex","justify-content-center","pt-3"],["mat-raised-button","","mat-dialog-close","",1,"ml-auto"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0),c._uU(1),c.qZA(),c.TgZ(2,"div",1),c._uU(3),c.ALo(4,"date"),c.qZA(),c.TgZ(5,"div",2),c._uU(6),c.qZA(),c.TgZ(7,"div",3),c._uU(8),c.qZA(),c.TgZ(9,"div",2),c._uU(10),c.qZA(),c.TgZ(11,"div",4),c._uU(12),c.qZA(),c.TgZ(13,"div",5),c.TgZ(14,"button",6),c._uU(15,"Close"),c.qZA(),c.qZA()),2&e&&(c.xp6(1),c.AsE("",t.selectedContainer.container_code,"-",t.selectedContainer.container_number,""),c.xp6(2),c.Oqu(c.lcZ(4,7,t.selectedContainer.eta)),c.xp6(3),c.hij("Handling Agent: ",t.selectedContainer.handling_agent_name," "),c.xp6(2),c.hij("Port of Loading: ",t.selectedContainer.pol,""),c.xp6(2),c.hij("Total Manifest Weight: ",t.selectedContainer.weight,""),c.xp6(2),c.hij("Total Volume: ",t.selectedContainer.volume,""))},directives:[d.lW,s.ZT],pipes:[o.uU],styles:[".color[_ngcontent-%COMP%]{background-color:#e7e8ea!important}.color1[_ngcontent-%COMP%]{background-color:#878a8f!important}"]}),e})();var T=n(9075),q=n(6458),A=n(9047),N=n(6627);function U(e,t){1&e&&c._UZ(0,"app-loader")}function k(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",16),c.TgZ(1,"div",17),c.TgZ(2,"mat-icon",18),c._uU(3,"arrow_upward"),c.qZA(),c.qZA(),c.TgZ(4,"div",19),c.TgZ(5,"h1"),c._uU(6,"Upload Photos"),c.qZA(),c.qZA(),c.TgZ(7,"div",20),c.TgZ(8,"input",21,22),c.NdJ("change",function(){c.CHM(e);const t=c.MAs(9);return c.oxw().selectedPhoto(t)}),c.qZA(),c.qZA(),c.TgZ(10,"div",23),c.TgZ(11,"button",24),c.NdJ("click",function(){return c.CHM(e),c.MAs(9).click()}),c._uU(12,"Select Photo"),c.qZA(),c.TgZ(13,"button",25),c.NdJ("click",function(){c.CHM(e);const t=c.oxw(),n=c.MAs(8);return t.openCamera(n)}),c._uU(14,"Capture Photo"),c.qZA(),c.qZA(),c.qZA()}2&e&&(c.xp6(2),c.Q6J("inline",!0))}function I(e,t){if(1&e&&(c.TgZ(0,"div",26),c._UZ(1,"img",27),c.qZA()),2&e){const e=c.oxw();c.xp6(1),c.Q6J("src",e.selectedFileObjectUrl,c.LSH)}}const S=function(e,t){return{"d-none":e,"d-flex flex-grow-1 flex-column container overflow-auto":t}};let y=(()=>{class e{constructor(e,t,n,o){this.sanitizer=e,this.service=t,this.dialogRef=n,this._snackBar=o,this.isCameraPage=!1,this.isImageTaken=!1,this.isUploadClicked=!1,this.isLoading=!1}ngOnInit(){}save(){}selectedPhoto(e){this.selectedFileBlob=e.files[0];const t=URL.createObjectURL(e.files[0]);this.selectedFileObjectUrl=this.sanitizer.bypassSecurityTrustUrl(t)}uploadPhoto(){let e=this.subjob_no;if(!this.isUploadClicked){this.isUploadClicked=!0;let t=new FileReader;t.readAsDataURL(this.selectedFileBlob),t.onloadend=()=>{let n=t.result;this.isLoading=!0,this.service.uploadPhoto(n,this.source,this.selectedContainer,this.selectedHbl,e).subscribe(e=>{this.isLoading=!1,this._snackBar.open("Image Uploaded Successfully!","OK",{duration:2e3}),this.dialogRef.close(),this.isUploadClicked=!1},e=>{this._snackBar.open("Image Uploaded Failed!","OK",{duration:2e3})})}}}openCamera(e){this.isCameraPage=!0,navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"},audio:!1}).then(t=>{this.track=t.getTracks()[0],e.srcObject=t}).catch(function(e){console.error("Oops. Something is broken.",e)})}captureImage(e,t,n){e.width=t.videoWidth,e.height=t.videoHeight,e.getContext("2d").drawImage(t,0,0),n.src=e.toDataURL("image/webp"),this.selectedFileObjectUrl=e.toDataURL("image/webp"),e.toBlob(e=>this.selectedFileBlob=e),this.isImageTaken=!0,this.isCameraPage=!1}}return e.\u0275fac=function(t){return new(t||e)(c.Y36(T.H7),c.Y36(C),c.Y36(s.so),c.Y36(q.ux))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-upload-photo-popup-loading"]],decls:21,vars:11,consts:[[4,"ngIf"],[1,"d-flex","flex-column","overflow-auto","h-100"],[1,"cfs-title1"],[1,"flex-grow-1","d-flex","flex-column","container","overflow-auto"],["class","flex-grow-1 d-flex flex-column align-items-center justify-content-center",4,"ngIf"],[3,"ngClass"],["autoplay","","playsinline","",1,"showVideo","flex-grow-1","pb-3","overflow-auto",3,"hidden"],["cameraView",""],[1,"showVideo",3,"hidden"],["capturedPicture",""],["capturedImg",""],["mat-raised-button","","color","primary",1,"m-auto",3,"click"],["class","showImage p-3 flex-grow-1 overflow-auto m-auto",4,"ngIf"],[1,"d-flex","pb-1"],["mat-raised-button","","mat-dialog-close","",1,"ml-auto"],["mat-raised-button","","color","primary",1,"ml-3",3,"disabled","click"],[1,"flex-grow-1","d-flex","flex-column","align-items-center","justify-content-center"],[1,"upload-icon-size","mb-3"],[3,"inline"],[1,""],[1,"d-none"],["type","file","id","myfile","name","myfile","accept","image/gif, image/jpeg",3,"change"],["selectFile",""],[1,"d-flex"],["mat-raised-button","","color","primary",1,"",3,"click"],["mat-raised-button","","color","primary",1,"ml-2",3,"click"],[1,"showImage","p-3","flex-grow-1","overflow-auto","m-auto"],[3,"src"]],template:function(e,t){if(1&e){const e=c.EpF();c.YNc(0,U,1,0,"app-loader",0),c.TgZ(1,"div",1),c.TgZ(2,"div",2),c._uU(3,"Capture Image"),c.qZA(),c.TgZ(4,"div",3),c.YNc(5,k,15,1,"div",4),c.TgZ(6,"div",5),c._UZ(7,"video",6,7),c._UZ(9,"canvas",8,9),c._UZ(11,"img",8,10),c.TgZ(13,"button",11),c.NdJ("click",function(){c.CHM(e);const n=c.MAs(10),o=c.MAs(8),i=c.MAs(12);return t.captureImage(n,o,i)}),c._uU(14,"Take Photo"),c.qZA(),c.qZA(),c.YNc(15,I,2,1,"div",12),c.TgZ(16,"div",13),c.TgZ(17,"button",14),c._uU(18," Close "),c.qZA(),c.TgZ(19,"button",15),c.NdJ("click",function(){return t.uploadPhoto()}),c._uU(20," Upload "),c.qZA(),c.qZA(),c.qZA(),c.qZA()}2&e&&(c.Q6J("ngIf",t.isLoading),c.xp6(5),c.Q6J("ngIf",!t.selectedFileObjectUrl&&!t.isCameraPage),c.xp6(1),c.Q6J("ngClass",c.WLB(8,S,!t.isCameraPage,t.isCameraPage)),c.xp6(1),c.Q6J("hidden",t.isImageTaken),c.xp6(2),c.Q6J("hidden",!0),c.xp6(2),c.Q6J("hidden",!t.isImageTaken),c.xp6(4),c.Q6J("ngIf",t.selectedFileObjectUrl),c.xp6(4),c.Q6J("disabled",!t.selectedFileObjectUrl&&t.isUploadClicked))},directives:[o.O5,o.mk,d.lW,s.ZT,A.R,N.Hw],styles:[".upload-icon-size[_ngcontent-%COMP%]{font-size:46px}.showImage[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .showVideo[_ngcontent-%COMP%]{max-width:100%;max-height:100%}"]}),e})();var J=n(9470),H=n(2789),M=n(2178),O=n(3738);function Y(e,t){1&e&&(c.TgZ(0,"div",4),c._UZ(1,"mat-progress-bar",5),c.qZA())}function Q(e,t){1&e&&(c.TgZ(0,"th",17),c._uU(1,"Container"),c.qZA())}function L(e,t){if(1&e&&(c.TgZ(0,"td",18),c._uU(1),c.qZA()),2&e){const e=t.$implicit;c.xp6(1),c.Oqu(e.container_number)}}function D(e,t){1&e&&(c.TgZ(0,"th",17),c._uU(1,"POL"),c.qZA())}function P(e,t){if(1&e&&(c.TgZ(0,"td",18),c._uU(1),c.qZA()),2&e){const e=t.$implicit;c.xp6(1),c.Oqu(e.pol)}}function j(e,t){1&e&&(c.TgZ(0,"th",17),c._uU(1,"POD"),c.qZA())}function E(e,t){if(1&e&&(c.TgZ(0,"td",18),c._uU(1),c.qZA()),2&e){const e=t.$implicit;c.xp6(1),c.Oqu(e.pod)}}function F(e,t){1&e&&(c.TgZ(0,"th",17),c._uU(1,"Carrier Name"),c.qZA())}function $(e,t){if(1&e&&(c.TgZ(0,"td",18),c._uU(1),c.qZA()),2&e){const e=t.$implicit;c.xp6(1),c.Oqu(e.carrier)}}function R(e,t){1&e&&(c.TgZ(0,"th",17),c._uU(1,"CFS Cutoff Date"),c.qZA())}function B(e,t){if(1&e&&(c.TgZ(0,"td",18),c._uU(1),c.ALo(2,"date"),c.qZA()),2&e){const e=t.$implicit;c.xp6(1),c.Oqu(c.lcZ(2,1,e.eta))}}function V(e,t){1&e&&c._UZ(0,"tr",19)}const W=function(e){return{"table-selected-row":e}};function X(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"tr",20),c.NdJ("click",function(){const t=c.CHM(e).$implicit;return c.oxw(2).clickedRow(t)}),c.qZA()}2&e&&c.Q6J("ngClass",c.VKq(1,W,t.$implicit.isSelected))}function K(e,t){if(1&e&&(c.TgZ(0,"div",6),c.TgZ(1,"table",7),c.ynx(2,8),c.YNc(3,Q,2,0,"th",9),c.YNc(4,L,2,1,"td",10),c.BQk(),c.ynx(5,11),c.YNc(6,D,2,0,"th",9),c.YNc(7,P,2,1,"td",10),c.BQk(),c.ynx(8,12),c.YNc(9,j,2,0,"th",9),c.YNc(10,E,2,1,"td",10),c.BQk(),c.ynx(11,13),c.YNc(12,F,2,0,"th",9),c.YNc(13,$,2,1,"td",10),c.BQk(),c.ynx(14,14),c.YNc(15,R,2,0,"th",9),c.YNc(16,B,3,3,"td",10),c.BQk(),c.YNc(17,V,1,0,"tr",15),c.YNc(18,X,1,3,"tr",16),c.qZA(),c.qZA()),2&e){const e=c.oxw();c.xp6(1),c.Q6J("dataSource",e.dataSource),c.xp6(16),c.Q6J("matHeaderRowDef",e.displayedColumns),c.xp6(1),c.Q6J("matRowDefColumns",e.displayedColumns)}}const z=function(e){return{"table-selected-card":e}};function G(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"mat-card",23),c.NdJ("click",function(){const t=c.CHM(e).$implicit;return c.oxw(2).clickedRow(t)}),c.TgZ(1,"div",24),c._uU(2),c.qZA(),c.TgZ(3,"div",25),c._uU(4),c.qZA(),c.TgZ(5,"div",25),c._uU(6),c.qZA(),c.TgZ(7,"div",26),c.TgZ(8,"div"),c._uU(9),c.qZA(),c.TgZ(10,"div"),c._uU(11),c.qZA(),c.qZA(),c.qZA()}if(2&e){const e=t.$implicit;c.Q6J("ngClass",c.VKq(6,z,e.isSelected)),c.xp6(2),c.Oqu(null==e?null:e.container_number),c.xp6(2),c.Oqu(null==e?null:e.pol),c.xp6(2),c.Oqu(null==e?null:e.pod),c.xp6(3),c.Oqu(null==e?null:e.carrier),c.xp6(2),c.Oqu(null==e?null:e.eta)}}function ee(e,t){if(1&e&&(c.TgZ(0,"div",21),c.YNc(1,G,12,8,"mat-card",22),c.qZA()),2&e){const e=c.oxw();c.xp6(1),c.Q6J("ngForOf",e.dataSource.filteredData)}}let te=(()=>{class e{constructor(e,t){this.dialog=e,this.devanningApiService=t,this.dataSource=new H.by,this.dataSourceArr=[],this.isLoading=!0,this.displayedColumns=["container","pol","eta","carriername","cfs_cutoff date"],this.selectedRow=new c.vpe,this.devanningApiService.getContainerDetails("").subscribe(e=>{this.dataSource=new H.by(e.container_list),this.isLoading=!1})}ngOnChanges(){this.dataSource.filter=this.search}ngOnInit(){}clickedRow(e){this.selectedRow.emit(e)}}return e.\u0275fac=function(t){return new(t||e)(c.Y36(s.uw),c.Y36(C))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-list-container-loading"]],inputs:{search:"search",selectedContainer:"selectedContainer"},outputs:{selectedRow:"selectedRow"},features:[c.TTD],decls:4,vars:3,consts:[[1,"h-100","w-100","d-flex","flex-column","overflow-auto"],["class","flex-grow-1 d-flex align-items-center justify-content-center",4,"ngIf"],["class","flex-grow-1 overflow-auto d-none d-md-block",4,"ngIf"],["class","flex-grow-1 overflow-auto d-block d-md-none",4,"ngIf"],[1,"flex-grow-1","d-flex","align-items-center","justify-content-center"],["mode","indeterminate",1,"mx-4"],[1,"flex-grow-1","overflow-auto","d-none","d-md-block"],["mat-table","",1,"mat-elevation-z8","w-100","list-container",3,"dataSource"],["matColumnDef","container"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","pol"],["matColumnDef","eta"],["matColumnDef","carriername"],["matColumnDef","cfs_cutoff date"],["mat-header-row","","class","sticky-top",4,"matHeaderRowDef"],["mat-row","",3,"ngClass","click",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["mat-header-row","",1,"sticky-top"],["mat-row","",3,"ngClass","click"],[1,"flex-grow-1","overflow-auto","d-block","d-md-none"],["class","m-3",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"m-3",3,"ngClass","click"],[1,"cfs-title1","pb-2"],[1,"pb-2"],[1,"d-flex","justify-content-between"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0),c.YNc(1,Y,2,0,"div",1),c.YNc(2,K,19,3,"div",2),c.YNc(3,ee,2,1,"div",3),c.qZA()),2&e&&(c.xp6(1),c.Q6J("ngIf",t.isLoading),c.xp6(1),c.Q6J("ngIf",!t.isLoading),c.xp6(1),c.Q6J("ngIf",!t.isLoading))},directives:[o.O5,M.pW,H.BZ,H.w1,H.fO,H.Dz,H.as,H.nj,H.ge,H.ev,H.XQ,H.Gk,o.mk,o.sg,O.a8],pipes:[o.uU],styles:[".list-container[_ngcontent-%COMP%]   .mat-row[_ngcontent-%COMP%]:hover   .mat-cell[_ngcontent-%COMP%]{background:#ff9191;color:#000;cursor:pointer}.list-container[_ngcontent-%COMP%]   .table-selected-row[_ngcontent-%COMP%]   .mat-cell[_ngcontent-%COMP%], .table-selected-card[_ngcontent-%COMP%]{background:red!important;color:#fff!important}"]}),e})();var ne=n(1769),oe=n(6738),ie=n(9983);function ae(e,t){1&e&&c._UZ(0,"app-loader")}let le=(()=>{class e{constructor(e,t,n,o,i,a){this.dialogRef=e,this.data=t,this.dialog=n,this.devanningApiService=o,this._snackBar=i,this.router=a,this.isLoading=!0,this.isUploadClicked=!1}ngOnInit(){let e=oe(this.selectedContainer.unloading_date).format().split(":");e=e[0]+":"+e[1];let t=oe().format().split(":");t=t[0]+":"+t[1],this.selectedContainer.unloading_date=this.selectedContainer.unloading_date?e:t}ok(){this.postActualSeal()}postActualSeal(){if(!this.isUploadClicked){this.isUploadClicked=!0;let e={actualSeal:this.selectedContainer.actual_seal,unloadingDate:oe(this.selectedContainer.unloading_date).format("DD-MMM-YYYY HH:MM")};this.isLoading=!0,this.devanningApiService.saveSeal(e,this.selectedContainer).subscribe(e=>{this.devanningApiService.complete(this.selectedHbl,this.selectedContainer).subscribe(e=>{this.isLoading=!1,this._snackBar.open("Container Unloaded Successfully completed!","OK",{duration:2e3}),this.dialogRef.close(),this.router.navigate(["/home"]),this.isUploadClicked=!1},e=>{this._snackBar.open("Container Unloaded Not completed!","OK",{duration:2e3})})}),this.dialogRef.close("ok")}}}return e.\u0275fac=function(t){return new(t||e)(c.Y36(s.so),c.Y36(s.WI),c.Y36(s.uw),c.Y36(C),c.Y36(q.ux),c.Y36(i.F0))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-complete-popup-loading"]],decls:13,vars:4,consts:[[4,"ngIf"],[1,"px-1","w-100"],["matInput","","placeholder","Enter Unloading Date","type","datetime-local",3,"ngModel","value","ngModelChange"],[1,"pb-3","text-danger","bold"],[1,"d-flex","pb-1"],["mat-raised-button","","mat-dialog-close","",1,"ml-auto"],["mat-raised-button","","color","primary",1,"ml-3",3,"disabled","click"]],template:function(e,t){1&e&&(c.YNc(0,ae,1,0,"app-loader",0),c.TgZ(1,"div"),c.TgZ(2,"mat-form-field",1),c.TgZ(3,"mat-label"),c._uU(4,"Loading Date "),c.qZA(),c.TgZ(5,"input",2),c.NdJ("ngModelChange",function(e){return t.selectedContainer.unloading_date=e}),c.qZA(),c.qZA(),c.qZA(),c.TgZ(6,"div",3),c._uU(7,"Do you want to proceed?"),c.qZA(),c.TgZ(8,"div",4),c.TgZ(9,"button",5),c._uU(10,"No"),c.qZA(),c.TgZ(11,"button",6),c.NdJ("click",function(){return t.ok()}),c._uU(12,"Yes"),c.qZA(),c.qZA()),2&e&&(c.Q6J("ngIf",t.isLoading),c.xp6(5),c.Q6J("ngModel",t.selectedContainer.unloading_date)("value",t.selectedContainer.unloading_date),c.xp6(6),c.Q6J("disabled",t.isUploadClicked))},directives:[o.O5,r.KE,r.hX,ie.Nt,a.Fj,a.JJ,a.On,d.lW,s.ZT,A.R],styles:[".width-100[_ngcontent-%COMP%]{width:100%!important;margin-right:5px}"]}),e})(),ce=(()=>{class e{constructor(e,t,n){this.dialog=e,this.data=t,this.dialogRef=n}ngOnInit(){let e=oe().format("DD-MMM-YYYY").split(":");e=e[0],this.eta=e}}return e.\u0275fac=function(t){return new(t||e)(c.Y36(s.uw),c.Y36(s.WI),c.Y36(s.so))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-preview-loading"]],decls:16,vars:6,consts:[[1,"cfs-title1","pb-3"],[1,"d-flex"],[1,"pl-5","cfs-title1","pt-4"],[1,"pl-3","ml-auto"],["disabled","",1,"height","cfs-title1","pl-4",3,"ngModel","ngModelChange"],[1,"d-flex","pb-1","pt-3"],["mat-raised-button","","mat-dialog-close","",1,"ml-auto"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0),c._uU(1),c.qZA(),c.TgZ(2,"div",0),c._uU(3),c.qZA(),c.TgZ(4,"div",0),c._uU(5),c.qZA(),c.TgZ(6,"div",0),c._uU(7),c.qZA(),c.TgZ(8,"div",1),c.TgZ(9,"div",2),c._uU(10),c.qZA(),c.TgZ(11,"div",3),c.TgZ(12,"input",4),c.NdJ("ngModelChange",function(e){return t.data.label=e}),c.qZA(),c.qZA(),c.qZA(),c.TgZ(13,"div",5),c.TgZ(14,"button",6),c._uU(15,"Close"),c.qZA(),c.qZA()),2&e&&(c.xp6(1),c.hij("FSC#: ",t.selectedContainer.fse_number,""),c.xp6(2),c.hij("HBL#: ",t.selectedHbl.hblNumber,""),c.xp6(2),c.hij("ETA: ",t.eta,""),c.xp6(2),c.hij("POD: ",t.selectedContainer.pod_text,""),c.xp6(3),c.hij("1/",t.data.unload,""),c.xp6(2),c.Q6J("ngModel",t.data.label))},directives:[a.Fj,a.JJ,a.On,d.lW,s.ZT],styles:[".height[_ngcontent-%COMP%]{height:70px;width:250px}"]}),e})(),se=(()=>{class e{constructor(e,t,n,o){this.dialog=e,this.data=t,this.dialogRef=n,this.devanningApiService=o}ngOnInit(){let e=oe().format("DD-MMM-YYYY").split(":");e=e[0],this.eta=e}print(){window.open(`https://www.efreightsuite.com/CR_Reports/CR_Exp_Cargo_CFS_Label.aspx?HBL=${this.selectedHbl.hblNumber}&Booking_No=${this.selectedContainer.fse_number}&POD=${this.selectedContainer.pod_text}&ETA=${this.eta}&No_of_pkg=${this.numberOfPakages}&No_Of_Copy=${this.unload}&SAAS_ID=LIVEFSL`,"_blank"),this.dialogRef.close()}preview(){const e=this.dialog.open(ce,{width:"400px",data:{jobNo:this.jobNo,unload:this.unload,label:this.numberOfPakages}});e.disableClose=!0,e.componentInstance.selectedContainer=this.selectedContainer,e.componentInstance.container_number=this.selectedContainer.container_number,e.componentInstance.jobNo=this.selectedContainer.job_no,e.componentInstance.selectedHbl=this.selectedHbl,e.componentInstance.subjob_no=this.selectedHbl.subjob_no,e.componentInstance.segment_code=this.selectedContainer.segment_code}}return e.\u0275fac=function(t){return new(t||e)(c.Y36(s.uw),c.Y36(s.WI),c.Y36(s.so),c.Y36(C))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-label-loading"]],decls:32,vars:7,consts:[[1,"h-100"],[1,"w-100"],["matInput","","disabled","","placeholder","Enter FSC Number","name","fscNumber",3,"ngModel","ngModelChange"],["matInput","","disabled","","placeholder","Enter hbl","name","hbl",3,"ngModel","ngModelChange"],["matInput","","disabled","","placeholder","Enter eta","name","eta",3,"ngModel","ngModelChange"],["matInput","","disabled","","placeholder","Enter pod","name","pod",3,"ngModel","ngModelChange"],["matInput","","placeholder","Enter No Of Labels","type","number","name","numberOfLabels",3,"ngModel","ngModelChange"],["matInput","","placeholder","Enter No Of Packages","name","numberOfPakages",3,"ngModel","ngModelChange"],[1,"d-flex","pb-1"],["mat-raised-button","","mat-dialog-close","",1,"ml-auto"],["mat-raised-button","","color","primary",1,"ml-3",3,"click"],["mat-raised-button","","color","primary",1,"ml-3",3,"disabled","click"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0),c.TgZ(1,"mat-form-field",1),c.TgZ(2,"mat-label"),c._uU(3,"FSC Number"),c.qZA(),c.TgZ(4,"input",2),c.NdJ("ngModelChange",function(e){return t.selectedContainer.fse_number=e}),c.qZA(),c.qZA(),c.TgZ(5,"mat-form-field",1),c.TgZ(6,"mat-label"),c._uU(7,"HBL"),c.qZA(),c.TgZ(8,"input",3),c.NdJ("ngModelChange",function(e){return t.selectedHbl.hblNumber=e}),c.qZA(),c.qZA(),c.TgZ(9,"mat-form-field",1),c.TgZ(10,"mat-label"),c._uU(11,"ETA"),c.qZA(),c.TgZ(12,"input",4),c.NdJ("ngModelChange",function(e){return t.eta=e}),c.qZA(),c.qZA(),c.TgZ(13,"mat-form-field",1),c.TgZ(14,"mat-label"),c._uU(15,"POD"),c.qZA(),c.TgZ(16,"input",5),c.NdJ("ngModelChange",function(e){return t.selectedContainer.pod_text=e}),c.qZA(),c.qZA(),c.TgZ(17,"mat-form-field",1),c.TgZ(18,"mat-label"),c._uU(19,"No Of Labels"),c.qZA(),c.TgZ(20,"input",6),c.NdJ("ngModelChange",function(e){return t.unload=e}),c.qZA(),c.qZA(),c.TgZ(21,"mat-form-field",1),c.TgZ(22,"mat-label"),c._uU(23,"No Of Packages"),c.qZA(),c.TgZ(24,"input",7),c.NdJ("ngModelChange",function(e){return t.numberOfPakages=e}),c.qZA(),c.qZA(),c.qZA(),c.TgZ(25,"div",8),c.TgZ(26,"button",9),c._uU(27,"Close"),c.qZA(),c.TgZ(28,"button",10),c.NdJ("click",function(){return t.preview()}),c._uU(29,"Preview"),c.qZA(),c.TgZ(30,"button",11),c.NdJ("click",function(){return t.print()}),c._uU(31,"Print"),c.qZA(),c.qZA()),2&e&&(c.xp6(4),c.Q6J("ngModel",t.selectedContainer.fse_number),c.xp6(4),c.Q6J("ngModel",t.selectedHbl.hblNumber),c.xp6(4),c.Q6J("ngModel",t.eta),c.xp6(4),c.Q6J("ngModel",t.selectedContainer.pod_text),c.xp6(4),c.Q6J("ngModel",t.unload),c.xp6(4),c.Q6J("ngModel",t.numberOfPakages),c.xp6(6),c.Q6J("disabled",!(t.selectedContainer.fse_number&&t.selectedHbl.hblNumber&&t.eta&&t.selectedContainer.pod_text&&t.unload>0)))},directives:[r.KE,r.hX,ie.Nt,a.Fj,a.JJ,a.On,a.wV,d.lW,s.ZT],styles:[""]}),e})();function de(e,t){if(1&e&&(c.TgZ(0,"div",4),c._uU(1),c.qZA()),2&e){const e=c.oxw();c.xp6(1),c.hij("damageType: ",e.details.damage_type,"")}}function re(e,t){if(1&e&&(c.TgZ(0,"div",3),c._uU(1),c.qZA()),2&e){const e=c.oxw();c.xp6(1),c.hij("damageNotes: ",e.details.damage_notes,"")}}let ue=(()=>{class e{constructor(e,t){this.dialog=e,this.data=t}ngOnInit(){this.details=this.data}}return e.\u0275fac=function(t){return new(t||e)(c.Y36(s.uw),c.Y36(s.WI))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-unload-item-details-popup-loading"]],decls:24,vars:9,consts:[[1,"d-flex","flex-column","overflow-auto","h-100"],[1,"flex-grow-1","container","overflow-auto"],[1,"cfs-title1","pb-2"],[1,"pb-2","color1","text-white","pl-2","pt-2"],[1,"pb-2","color","pl-2","pt-2"],["class","pb-2 color pl-2 pt-2",4,"ngIf"],["class","pb-2 color1 text-white pl-2 pt-2",4,"ngIf"],[1,"d-flex","pb-1"],["mat-raised-button","","mat-dialog-close","",1,"ml-auto"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0),c.TgZ(1,"div",1),c.TgZ(2,"div",2),c.TgZ(3,"strong"),c._uU(4,"Unload Details"),c.qZA(),c.qZA(),c.TgZ(5,"div",3),c._uU(6),c.qZA(),c.TgZ(7,"div",4),c._uU(8),c.qZA(),c.TgZ(9,"div",3),c._uU(10),c.qZA(),c.YNc(11,de,2,1,"div",5),c.YNc(12,re,2,1,"div",6),c.TgZ(13,"div",4),c._uU(14),c.qZA(),c.TgZ(15,"div",3),c._uU(16),c.qZA(),c.TgZ(17,"div",4),c._uU(18),c.qZA(),c.TgZ(19,"div",3),c._uU(20),c.qZA(),c.qZA(),c.TgZ(21,"div",7),c.TgZ(22,"button",8),c._uU(23," Close "),c.qZA(),c.qZA(),c.qZA()),2&e&&(c.xp6(6),c.hij("packageType: ",t.details.package_type,""),c.xp6(2),c.hij("Received Qty: ",t.details.rcvd_qty," "),c.xp6(2),c.hij("Condition: ",t.details.good_damage,""),c.xp6(1),c.Q6J("ngIf","Damage"==t.details.good_damage),c.xp6(1),c.Q6J("ngIf","Damage"==t.details.good_damage),c.xp6(2),c.hij("Volume: ",t.details.volume,""),c.xp6(2),c.hij("weight: ",t.details.weight,""),c.xp6(2),c.hij("LandedMarks: ",t.details.landed_marks,""),c.xp6(2),c.hij("CFSNote:",t.details.cfs_slot," "))},directives:[o.O5,d.lW,s.ZT],styles:[".color[_ngcontent-%COMP%]{background-color:#e7e8ea!important}.color1[_ngcontent-%COMP%]{background-color:#878a8f!important}"]}),e})();function ge(e,t){1&e&&c._UZ(0,"app-loader")}function pe(e,t){if(1&e&&(c.TgZ(0,"mat-label"),c._uU(1),c.qZA()),2&e){const e=c.oxw();c.xp6(1),c.hij(" ",e.packageType," ")}}function me(e,t){1&e&&(c.TgZ(0,"mat-lable"),c._uU(1,"Type"),c.qZA())}function he(e,t){if(1&e&&(c.TgZ(0,"mat-option",14),c._uU(1),c.qZA()),2&e){const e=t.$implicit;c.Q6J("value",e.value),c.xp6(1),c.hij(" ",e.viewValue," ")}}let fe=(()=>{class e{constructor(e,t,n,o){this.dialogRef=e,this.data=t,this.dialog=n,this.devanningApiService=o,this.cbm=0,this.damage=new a.NI,this.panelOpenState=!1,this.isLoading=!1,this.isUploadClicked=!1}ngOnInit(){this.isLoading=!0,this.devanningApiService.packType().subscribe(e=>{this.isLoading=!1,this.types=e.pack_master.map(e=>({value:e.port_code,viewValue:e.port_name})),this.packageType=this.selectedHbl.pack_code}),this.isLoading=!0,this.devanningApiService.damageType().subscribe(e=>{this.isLoading=!1,this.damageTypes=e.pack_master.map(e=>({value:e.port_code,viewValue:e.port_name}))})}weightFun(e){e.split(".")[1].length>=4&&(this.weight=Number(e).toFixed(3))}save(){if(!this.isUploadClicked){this.isUploadClicked=!0;let e={receivedPiece:this.receivedPiece?this.receivedPiece:"",receivedWeight:this.receivedWeight?this.receivedWeight:"",receivedVolume:this.receivedVolume?this.receivedVolume:"",damageCondition:this.damage.value?this.damage.value:"",damageType:this.damageType?this.damageType:"",damageNotes:this.damageNotes?this.damageNotes:"",landedMarks:this.landedMarks?this.landedMarks:"",cfsNote:this.cfsNote?this.cfsNote:"",length:this.length?this.length:"",width:this.width?this.width:"",height:this.height?this.height:"",cbm:this.cbm?this.cbm:"",weight:this.weight?this.weight:"",unloadTime:this.formatDate((new Date).getTime()),containerNo:this.containerNo?this.containerNo:"",jobNo:this.jobNo?this.jobNo:"",hblNumber:this.hblNumber?this.hblNumber:"",packageType:this.packageType?this.packageType:"",subJobNo:this.subJobNo?this.subJobNo:""};this.isLoading=!0,this.devanningApiService.getSaveItem(e,this.selectedContainer).subscribe(e=>{this.isLoading=!1}),this.dialogRef.close(),this.isUploadClicked=!1}}formatDate(e){return new Date(e).toLocaleTimeString("en-us",{weekday:"long",year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}calculateCBM(){let e=this.length*this.width*this.height/1e6*this.receivedPiece;this.cbm=isNaN(e)?"":Number(e).toFixed(3)}}return e.\u0275fac=function(t){return new(t||e)(c.Y36(s.so),c.Y36(s.WI),c.Y36(s.uw),c.Y36(C))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-add-new-hbl-item-loading"]],decls:21,vars:7,consts:[[4,"ngIf"],[1,"d-flex","flex-column","overflow-auto","h-100"],[1,"cfs-title1"],[1,"flex-grow-1","container","overflow-auto"],[1,"col-12","col-md-8","col-lg-6","d-flex","flex-column","mx-auto","mt-3"],[1,"d-flex","justify-content-between","w-100"],[1,"px-1"],["name","type",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"px-1","w-50"],["matInput","","placeholder","Enter Load Qty","type","number","name","receivedPiece",3,"ngModel","ngModelChange","keyup"],[1,"d-flex","pb-1"],["mat-raised-button","","mat-dialog-close","",1,"ml-auto"],["mat-raised-button","","color","primary",1,"ml-3",3,"disabled","click"],[3,"value"]],template:function(e,t){1&e&&(c.YNc(0,ge,1,0,"app-loader",0),c.TgZ(1,"div",1),c.TgZ(2,"div",2),c._uU(3,"Load Item"),c.qZA(),c.TgZ(4,"div",3),c.TgZ(5,"form",4),c.TgZ(6,"div",5),c.TgZ(7,"mat-form-field",6),c.YNc(8,pe,2,1,"mat-label",0),c.YNc(9,me,2,0,"mat-lable",0),c.TgZ(10,"mat-select",7),c.NdJ("ngModelChange",function(e){return t.packageType=e}),c.YNc(11,he,2,2,"mat-option",8),c.qZA(),c.qZA(),c.TgZ(12,"mat-form-field",9),c.TgZ(13,"mat-label"),c._uU(14,"Load Qty"),c.qZA(),c.TgZ(15,"input",10),c.NdJ("ngModelChange",function(e){return t.receivedPiece=e})("keyup",function(){return t.calculateCBM()}),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(16,"div",11),c.TgZ(17,"button",12),c._uU(18," Close "),c.qZA(),c.TgZ(19,"button",13),c.NdJ("click",function(){return t.save()}),c._uU(20," Save "),c.qZA(),c.qZA(),c.qZA()),2&e&&(c.Q6J("ngIf",t.isLoading),c.xp6(8),c.Q6J("ngIf",t.selectedHbl.pack_description),c.xp6(1),c.Q6J("ngIf",!t.selectedHbl.pack_description),c.xp6(1),c.Q6J("ngModel",t.packageType),c.xp6(1),c.Q6J("ngForOf",t.types),c.xp6(4),c.Q6J("ngModel",t.receivedPiece),c.xp6(4),c.Q6J("disabled",!t.receivedPiece))},directives:[o.O5,a._Y,a.JL,a.F,r.KE,u.gD,a.JJ,a.On,o.sg,r.hX,ie.Nt,a.wV,a.Fj,d.lW,s.ZT,A.R,g.ey],styles:[".hbl-dimension-field[_ngcontent-%COMP%]{width:30%}.mat-form-field[_ngcontent-%COMP%] + .mat-form-field[_ngcontent-%COMP%]{margin-left:8px}"]}),e})();function be(e,t){1&e&&c._UZ(0,"app-loader")}function Ze(e,t){if(1&e&&(c.TgZ(0,"mat-card",10),c.TgZ(1,"div",11),c._uU(2),c.qZA(),c.TgZ(3,"div",12),c.TgZ(4,"div",13),c.TgZ(5,"div",14),c._uU(6),c.qZA(),c.TgZ(7,"div"),c._uU(8,"Manifest Pieces"),c.qZA(),c.qZA(),c.TgZ(9,"div",13),c.TgZ(10,"div",14),c._uU(11),c.qZA(),c.TgZ(12,"div"),c._uU(13,"Loaded"),c.qZA(),c.qZA(),c.TgZ(14,"div",13),c.TgZ(15,"div",14),c._uU(16),c.qZA(),c.TgZ(17,"div"),c._uU(18,"Balance"),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&e){const e=c.oxw();c.xp6(2),c.Oqu(e.selectedHbl.mark),c.xp6(4),c.Oqu(e.selectedHbl.manifestedPieces),c.xp6(5),c.Oqu(e.selectedHbl.unloaded),c.xp6(5),c.Oqu(e.selectedHbl.balance)}}function xe(e,t){1&e&&(c.TgZ(0,"div",15),c._UZ(1,"mat-progress-bar",16),c.qZA())}function we(e,t){1&e&&(c.TgZ(0,"th",27),c._uU(1,"Received Qty"),c.qZA())}function _e(e,t){if(1&e&&(c.TgZ(0,"td",28),c._uU(1),c.qZA()),2&e){const e=t.$implicit;c.xp6(1),c.Oqu(e.rcvd_qty)}}function Ce(e,t){1&e&&(c.TgZ(0,"th",27),c._uU(1,"Condition"),c.qZA())}function ve(e,t){if(1&e&&(c.TgZ(0,"td",29),c._uU(1),c.qZA()),2&e){const e=t.$implicit;c.xp6(1),c.Oqu(e.good_damage)}}function Te(e,t){1&e&&(c.TgZ(0,"th",30),c._uU(1,"Action"),c.qZA())}function qe(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"td",29),c.TgZ(1,"div",31),c.TgZ(2,"button",32),c.NdJ("click",function(){const t=c.CHM(e).$implicit;return c.oxw(2).unloadItem(t)}),c.TgZ(3,"mat-icon"),c._uU(4,"details"),c.qZA(),c.qZA(),c.TgZ(5,"button",32),c.NdJ("click",function(){const t=c.CHM(e),n=t.$implicit,o=t.index,i=c.oxw(2);return i.DeleteItem(n,i.dataSource,o,i.selectedHbl.hblNumber)}),c.TgZ(6,"mat-icon"),c._uU(7,"delete"),c.qZA(),c.qZA(),c.qZA(),c.qZA()}}function Ae(e,t){1&e&&c._UZ(0,"tr",33)}function Ne(e,t){1&e&&c._UZ(0,"tr",34)}function Ue(e,t){if(1&e&&(c.TgZ(0,"table",17),c.ynx(1,18),c.YNc(2,we,2,0,"th",19),c.YNc(3,_e,2,1,"td",20),c.BQk(),c.ynx(4,21),c.YNc(5,Ce,2,0,"th",19),c.YNc(6,ve,2,1,"td",22),c.BQk(),c.ynx(7,23),c.YNc(8,Te,2,0,"th",24),c.YNc(9,qe,8,0,"td",22),c.BQk(),c.YNc(10,Ae,1,0,"tr",25),c.YNc(11,Ne,1,0,"tr",26),c.qZA()),2&e){const e=c.oxw();c.Q6J("dataSource",e.dataSource),c.xp6(10),c.Q6J("matHeaderRowDef",e.displayedColumns),c.xp6(1),c.Q6J("matRowDefColumns",e.displayedColumns)}}let ke=(()=>{class e{constructor(e,t){this.dialog=e,this.devanningApiService=t,this.isLoading=!1,this.dataSource=[],this.displayedColumns=["receivedPiece","damageNotes","actions"]}ngOnInit(){}ngOnChanges(){this.selectedContainer&&this.selectedHbl&&this.loadData()}loadData(){this.isLoading=!0,this.devanningApiService.getUnloadDetails(this.selectedHbl,this.selectedContainer).subscribe(e=>{if(this.dataSource=e.items_list,this.dataSource){let e=0;this.dataSource.forEach(t=>{e=Number(e)+Number(t.rcvd_qty)}),this.selectedHbl.unloaded=e;let t=this.selectedHbl.manifestedPieces-this.selectedHbl.unloaded;this.selectedHbl.balance=t>0?t:0}else this.selectedHbl.unloaded=0,this.selectedHbl.balance=this.selectedHbl.manifestedPieces;this.isLoading=!1})}addItem(){const e=this.dialog.open(fe,{width:"70%",height:"50%",data:{}});e.disableClose=!0,e.componentInstance.containerNo=this.selectedContainer.container_number,e.componentInstance.jobNo=this.selectedContainer.job_no,e.componentInstance.hblNumber=this.selectedHbl.hblNumber,e.componentInstance.selectedHbl=this.selectedHbl,e.componentInstance.selectedContainer=this.selectedContainer,e.componentInstance.subJobNo=this.selectedHbl.subjob_no,e.afterClosed().subscribe(e=>{console.log("The dialog was closed"),e?(this.selectedHbl.unloaded=this.selectedHbl.unloaded+e.receivedPiece,this.selectedHbl.balance=this.selectedHbl.manifestedPieces-this.selectedHbl.unloaded,this.devanningApiService.addUnloadEntry(this.selectedContainer.container,this.selectedHbl.hblNumber,e),this.loadData()):this.loadData()})}unloadItem(e){this.dialog.open(ue,{height:"390px",width:"400px",data:e}).disableClose=!0}DeleteItem(e,t,n,o){this.isLoading=!0,this.devanningApiService.deleteItem(e.sl_no,e.job_no,e.segment_code,o).subscribe(e=>{this.isLoading=!1,console.log(e,"delete api"),this.loadData()})}complete(){const e=this.dialog.open(le,{width:"400px",data:{jobNo:this.jobNo}});e.disableClose=!0,e.componentInstance.selectedContainer=this.selectedContainer,e.componentInstance.container_number=this.selectedContainer.container_number,e.componentInstance.jobNo=this.selectedContainer.job_no,e.componentInstance.selectedHbl=this.selectedHbl,e.componentInstance.subjob_no=this.selectedHbl.subjob_no,e.componentInstance.segment_code=this.selectedContainer.segment_code}uploadPhoto(){const e=this.dialog.open(y,{width:"80%",height:"90%",data:{jobNo:this.jobNo}});e.componentInstance.job_no=this.jobNo,e.componentInstance.house_no=this.hblNumber,e.componentInstance.segment_code=this.selectedContainer.segment_code,e.componentInstance.source="H",e.componentInstance.selectedContainer=this.selectedContainer,e.componentInstance.selectedHbl=this.selectedHbl,e.componentInstance.subjob_no=this.selectedHbl.subjob_no,e.afterClosed().subscribe(e=>{})}label(e){const t=this.dialog.open(se,{width:"400px",data:{jobNo:this.jobNo}});t.disableClose=!0,t.componentInstance.selectedContainer=this.selectedContainer,t.componentInstance.container_number=this.selectedContainer.container_number,t.componentInstance.jobNo=this.selectedContainer.job_no,t.componentInstance.selectedHbl=this.selectedHbl,t.componentInstance.subjob_no=this.selectedHbl.subjob_no,t.componentInstance.segment_code=this.selectedContainer.segment_code,t.componentInstance.unload=this.selectedHbl.unloaded}}return e.\u0275fac=function(t){return new(t||e)(c.Y36(s.uw),c.Y36(C))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-hbl-detail-loading"]],inputs:{selectedHbl:"selectedHbl",selectedContainer:"selectedContainer"},features:[c.TTD],decls:14,vars:7,consts:[[4,"ngIf"],[1,"h-100","w-100","d-flex","flex-column","overflow-auto"],[1,"bg-white","border-top","py-2","d-flex","justify-content-center"],["mat-raised-button","","color","primary",3,"disabled","click"],["mat-raised-button","","color","primary",1,"ml-3",3,"disabled","click"],[1,"flex-grow-1","d-flex","flex-column","overflow-auto"],[1,"d-flex"],["class","m-3 flex-grow-1",4,"ngIf"],["class","flex-grow-1 d-flex align-items-center justify-content-center ",4,"ngIf"],["mat-table","","class"," mat-elevation-z8 w-100 list-container",3,"dataSource",4,"ngIf"],[1,"m-3","flex-grow-1"],[1,"pb-4"],[1,"d-flex","justify-content-between"],[1,"d-flex","flex-column","justify-content-center","text-center"],[1,"cfs-title1"],[1,"flex-grow-1","d-flex","align-items-center","justify-content-center"],["mode","indeterminate",1,"mx-4"],["mat-table","",1,"mat-elevation-z8","w-100","list-container",3,"dataSource"],["matColumnDef","receivedPiece"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","px-2",4,"matCellDef"],["matColumnDef","damageNotes"],["mat-cell","",4,"matCellDef"],["matColumnDef","actions"],["mat-header-cell","","class","text-right",4,"matHeaderCellDef"],["mat-header-row","","class","sticky-top",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell","",1,"px-2"],["mat-cell",""],["mat-header-cell","",1,"text-right"],[1,"d-flex","justify-content-end"],["mat-icon-button","","color","primary",3,"click"],["mat-header-row","",1,"sticky-top"],["mat-row",""]],template:function(e,t){1&e&&(c.YNc(0,be,1,0,"app-loader",0),c.TgZ(1,"div",1),c.TgZ(2,"div",2),c.TgZ(3,"button",3),c.NdJ("click",function(){return t.addItem()}),c._uU(4," Load Item "),c.qZA(),c.TgZ(5,"button",4),c.NdJ("click",function(){return t.uploadPhoto()}),c._uU(6," Upload Photos "),c.qZA(),c.TgZ(7,"button",4),c.NdJ("click",function(){return t.complete()}),c._uU(8," Complete "),c.qZA(),c.qZA(),c.TgZ(9,"div",5),c.TgZ(10,"div",6),c.YNc(11,Ze,19,4,"mat-card",7),c.qZA(),c.YNc(12,xe,2,0,"div",8),c.YNc(13,Ue,12,3,"table",9),c.qZA(),c.qZA()),2&e&&(c.Q6J("ngIf",t.isLoading),c.xp6(3),c.Q6J("disabled",!t.selectedHbl),c.xp6(2),c.Q6J("disabled",!t.selectedHbl),c.xp6(2),c.Q6J("disabled",!t.selectedHbl),c.xp6(4),c.Q6J("ngIf",t.selectedHbl),c.xp6(1),c.Q6J("ngIf",t.isLoading),c.xp6(1),c.Q6J("ngIf",!t.isLoading&&t.selectedHbl))},directives:[o.O5,d.lW,A.R,O.a8,M.pW,H.BZ,H.w1,H.fO,H.Dz,H.as,H.nj,H.ge,H.ev,N.Hw,H.XQ,H.Gk],styles:[""]}),e})();var Ie=n(5939);function Se(e,t){1&e&&(c.TgZ(0,"div",4),c._UZ(1,"mat-progress-bar",5),c.qZA())}function ye(e,t){1&e&&(c.TgZ(0,"th",19),c._uU(1,"HBL"),c.qZA())}function Je(e,t){if(1&e&&(c.TgZ(0,"td",20),c._uU(1),c.qZA()),2&e){const e=t.$implicit;c.xp6(1),c.Oqu(e.hblNumber)}}function He(e,t){1&e&&(c.TgZ(0,"th",19),c._uU(1,"MARK"),c.qZA())}function Me(e,t){if(1&e&&(c.TgZ(0,"td",20),c._uU(1),c.qZA()),2&e){const e=t.$implicit;c.xp6(1),c.Oqu(e.mark)}}function Oe(e,t){1&e&&(c.TgZ(0,"th",21),c._uU(1,"MANIFESTED"),c.qZA())}function Ye(e,t){if(1&e&&(c.TgZ(0,"td",22),c._uU(1),c.qZA()),2&e){const e=t.$implicit;c.xp6(1),c.Oqu(e.manifestedPieces)}}function Qe(e,t){1&e&&(c.TgZ(0,"th",21),c._uU(1,"Loaded"),c.qZA())}function Le(e,t){if(1&e&&(c.TgZ(0,"td",22),c._uU(1),c.qZA()),2&e){const e=t.$implicit;c.xp6(1),c.Oqu(e.unloaded)}}function De(e,t){1&e&&(c.TgZ(0,"th",21),c._uU(1,"BALANCE"),c.qZA())}function Pe(e,t){if(1&e&&(c.TgZ(0,"td",22),c._uU(1),c.qZA()),2&e){const e=t.$implicit;c.xp6(1),c.Oqu(e.balance)}}function je(e,t){1&e&&c._UZ(0,"tr",23)}const Ee=function(e){return{"table-selected-row":e}};function Fe(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"tr",24),c.NdJ("click",function(){const t=c.CHM(e).$implicit;return c.oxw(2).clickedRow(t)}),c.qZA()}2&e&&c.Q6J("ngClass",c.VKq(1,Ee,t.$implicit.isSelected))}function $e(e,t){if(1&e&&(c.TgZ(0,"div",6),c.TgZ(1,"table",7),c.ynx(2,8),c.YNc(3,ye,2,0,"th",9),c.YNc(4,Je,2,1,"td",10),c.BQk(),c.ynx(5,11),c.YNc(6,He,2,0,"th",9),c.YNc(7,Me,2,1,"td",10),c.BQk(),c.ynx(8,12),c.YNc(9,Oe,2,0,"th",13),c.YNc(10,Ye,2,1,"td",14),c.BQk(),c.ynx(11,15),c.YNc(12,Qe,2,0,"th",13),c.YNc(13,Le,2,1,"td",14),c.BQk(),c.ynx(14,16),c.YNc(15,De,2,0,"th",13),c.YNc(16,Pe,2,1,"td",14),c.BQk(),c.YNc(17,je,1,0,"tr",17),c.YNc(18,Fe,1,3,"tr",18),c.qZA(),c.qZA()),2&e){const e=c.oxw();c.xp6(1),c.Q6J("dataSource",e.dataSource),c.xp6(16),c.Q6J("matHeaderRowDef",e.displayedColumns),c.xp6(1),c.Q6J("matRowDefColumns",e.displayedColumns)}}const Re=function(e){return{"table-selected-card":e}};function Be(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"mat-card",27),c.NdJ("click",function(){const t=c.CHM(e).$implicit;return c.oxw(2).clickedRow(t)}),c.TgZ(1,"div",28),c._uU(2),c.qZA(),c.TgZ(3,"div",29),c._uU(4),c.qZA(),c.TgZ(5,"div",30),c.TgZ(6,"div",31),c.TgZ(7,"div",32),c._uU(8),c.qZA(),c.TgZ(9,"div"),c._uU(10,"Manifest Pieces"),c.qZA(),c.qZA(),c.TgZ(11,"div",31),c.TgZ(12,"div",32),c._uU(13),c.qZA(),c.TgZ(14,"div"),c._uU(15,"Loaded"),c.qZA(),c.qZA(),c.TgZ(16,"div",31),c.TgZ(17,"div",32),c._uU(18),c.qZA(),c.TgZ(19,"div"),c._uU(20,"Balance"),c.qZA(),c.qZA(),c.qZA(),c.qZA()}if(2&e){const e=t.$implicit;c.Q6J("ngClass",c.VKq(6,Re,e.isSelected)),c.xp6(2),c.Oqu(e.hblNumber),c.xp6(2),c.Oqu(e.mark),c.xp6(4),c.Oqu(e.manifestedPieces),c.xp6(5),c.Oqu(e.unloaded),c.xp6(5),c.Oqu(e.balance)}}function Ve(e,t){if(1&e&&(c.TgZ(0,"div",25),c.YNc(1,Be,21,8,"mat-card",26),c.qZA()),2&e){const e=c.oxw();c.xp6(1),c.Q6J("ngForOf",e.dataSource.filteredData)}}let We=(()=>{class e{constructor(e){this.devanningApiService=e,this.dataSource=new H.by,this.displayedColumns=["hblNumber","manifestedPieces","unloaded"],this.selectedRow=new c.vpe,this.isLoading=!0}ngOnInit(){}ngOnChanges(e){this.selectedContainer&&e.selectedContainer&&this.selectedContainer!==e.selectedContainer.previousValue&&(this.isLoading=!0,this.devanningApiService.getHblDetails(this.selectedContainer).subscribe(e=>{this.isLoading=!1,e.hbl_list.sort((e,t)=>Number(t.balance)-Number(e.balance)),this.dataSource=new H.by(e.hbl_list)})),this.dataSource.filter=this.search}clickedRow(e){this.dataSource.filteredData=this.dataSource.filteredData.sort((e,t)=>e.balance-t.balance),this.dataSource.data.forEach(e=>e.isSelected=!1),e.isSelected=!0,e.selectedContainer=this.selectedContainer,this.selectedRow.emit(e)}}return e.\u0275fac=function(t){return new(t||e)(c.Y36(C))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-list-hbl-loading"]],inputs:{selectedContainer:"selectedContainer",search:"search"},outputs:{selectedRow:"selectedRow"},features:[c.TTD],decls:4,vars:3,consts:[[1,"h-100","w-100","d-flex","flex-column","overflow-auto"],["class","flex-grow-1 d-flex align-items-center justify-content-center",4,"ngIf"],["class","flex-grow-1 overflow-auto d-none d-md-block",4,"ngIf"],["class","flex-grow-1 overflow-auto d-block d-md-none",4,"ngIf"],[1,"flex-grow-1","d-flex","align-items-center","justify-content-center"],["mode","indeterminate",1,"mx-4"],[1,"flex-grow-1","overflow-auto","d-none","d-md-block"],["mat-table","",1,"mat-elevation-z8","w-100","list-container",3,"dataSource"],["matColumnDef","hblNumber"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","mark"],["matColumnDef","manifestedPieces"],["mat-header-cell","","class","text-right",4,"matHeaderCellDef"],["mat-cell","","class","text-right",4,"matCellDef"],["matColumnDef","unloaded"],["matColumnDef","balance"],["mat-header-row","","class","sticky-top",4,"matHeaderRowDef"],["mat-row","",3,"ngClass","click",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["mat-header-cell","",1,"text-right"],["mat-cell","",1,"text-right"],["mat-header-row","",1,"sticky-top"],["mat-row","",3,"ngClass","click"],[1,"flex-grow-1","overflow-auto","d-block","d-md-none"],["class","m-3",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"m-3",3,"ngClass","click"],[1,"cfs-title1","pb-2"],[1,"pb-4"],[1,"d-flex","justify-content-between"],[1,"d-flex","flex-column","justify-content-center","text-center"],[1,"cfs-title1"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0),c.YNc(1,Se,2,0,"div",1),c.YNc(2,$e,19,3,"div",2),c.YNc(3,Ve,2,1,"div",3),c.qZA()),2&e&&(c.xp6(1),c.Q6J("ngIf",t.isLoading),c.xp6(1),c.Q6J("ngIf",!t.isLoading),c.xp6(1),c.Q6J("ngIf",!t.isLoading))},directives:[o.O5,M.pW,H.BZ,H.w1,H.fO,H.Dz,H.as,H.nj,H.ge,H.ev,H.XQ,H.Gk,o.mk,o.sg,O.a8],styles:[".list-container[_ngcontent-%COMP%]   .mat-row[_ngcontent-%COMP%]:hover   .mat-cell[_ngcontent-%COMP%]{background:#ff9191;color:#000;cursor:pointer}.list-container[_ngcontent-%COMP%]   .table-selected-row[_ngcontent-%COMP%]   .mat-cell[_ngcontent-%COMP%], .table-selected-card[_ngcontent-%COMP%]{background:red!important;color:#fff!important}"]}),e})();function Xe(e,t){if(1&e&&(c.TgZ(0,"mat-form-field",33),c.TgZ(1,"mat-label"),c._uU(2,"Search"),c.qZA(),c._UZ(3,"input",34),c.qZA()),2&e){const e=c.oxw();c.xp6(3),c.Q6J("formControl",e.containerSearchFC)}}function Ke(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"button",9),c.NdJ("click",function(){c.CHM(e);const t=c.oxw();return t.isContainerSearch=!t.isContainerSearch,t.containerSearchFC.setValue("")}),c.TgZ(1,"mat-icon"),c._uU(2),c.qZA(),c.qZA()}if(2&e){const e=c.oxw();c.xp6(2),c.Oqu(e.isContainerSearch?"close":"search")}}function ze(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"button",9),c.NdJ("click",function(){c.CHM(e);const t=c.oxw();return t.openContainerScannerPopup(t.containerSearchFC,"container-desktop")}),c.TgZ(1,"mat-icon"),c._uU(2,"qr_code_scanner"),c.qZA(),c.qZA()}}function Ge(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"button",9),c.NdJ("click",function(){c.CHM(e);const t=c.oxw();return t.openContainerDetailsPopup(t.selectedContainer)}),c.TgZ(1,"mat-icon"),c._uU(2,"info"),c.qZA(),c.qZA()}}function et(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"button",35),c.NdJ("click",function(){return c.CHM(e),c.oxw().uploadPhoto()}),c._uU(1," Photo "),c.qZA()}}function tt(e,t){1&e&&(c.TgZ(0,"div",4),c._uU(1,"HBL List"),c.qZA())}function nt(e,t){if(1&e&&(c.TgZ(0,"h3",40),c._uU(1),c.qZA()),2&e){const e=c.oxw(2);c.xp6(1),c.hij("HBL NO: ",e.selectedHbl.hblNumber,"")}}function ot(e,t){if(1&e&&(c.TgZ(0,"mat-form-field",33),c.TgZ(1,"mat-label"),c._uU(2,"Search"),c.qZA(),c._UZ(3,"input",41),c.qZA()),2&e){const e=c.oxw(2);c.xp6(3),c.Q6J("formControl",e.hblSearchFC)}}function it(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"button",9),c.NdJ("click",function(){c.CHM(e);const t=c.oxw(2);return t.isHblSearch=!t.isHblSearch,t.hblSearchFC.setValue("")}),c.TgZ(1,"mat-icon"),c._uU(2),c.qZA(),c.qZA()}if(2&e){const e=c.oxw(2);c.xp6(2),c.Oqu(e.isHblSearch?"close":"search")}}function at(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"button",9),c.NdJ("click",function(){c.CHM(e);const t=c.oxw(2);return t.openScannerPopup(t.hblSearchFC,"hbl-desktop")}),c.TgZ(1,"mat-icon"),c._uU(2,"qr_code_scanner"),c.qZA(),c.qZA()}}function lt(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"app-list-hbl-loading",30),c.NdJ("selectedRow",function(t){return c.CHM(e),c.oxw(2).hblSelected(t)}),c.qZA()}if(2&e){const e=c.oxw(2);c.Q6J("selectedContainer",e.selectedContainer)("search",e.hblSearchFC.value)}}const ct=function(e,t,n){return{"h-50":e,"flex-grow-1":t,"height-fit-content":n}};function st(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",36),c.TgZ(1,"div",3),c.YNc(2,tt,2,0,"div",37),c.YNc(3,nt,2,1,"h3",38),c.TgZ(4,"div",5),c.YNc(5,ot,4,1,"mat-form-field",6),c.YNc(6,it,3,1,"button",7),c.YNc(7,at,3,0,"button",7),c.TgZ(8,"button",9),c.NdJ("click",function(){c.CHM(e);const t=c.oxw();return t.isHblExpanded=!t.isHblExpanded}),c.TgZ(9,"mat-icon"),c._uU(10),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.YNc(11,lt,1,2,"app-list-hbl-loading",39),c.qZA()}if(2&e){const e=c.oxw();c.Q6J("ngClass",c.kEZ(8,ct,e.isHblExpanded&&e.isContainerExpanded,e.isHblExpanded&&!e.isContainerExpanded,!e.isHblExpanded)),c.xp6(2),c.Q6J("ngIf",e.isHblExpanded),c.xp6(1),c.Q6J("ngIf",!e.isHblExpanded),c.xp6(2),c.Q6J("ngIf",e.isHblSearch&&e.isHblExpanded),c.xp6(1),c.Q6J("ngIf",e.isHblExpanded),c.xp6(1),c.Q6J("ngIf",e.isHblExpanded),c.xp6(3),c.Oqu(e.isHblExpanded?"expand_more":"expand_less"),c.xp6(1),c.Q6J("ngIf",e.isHblExpanded)}}function dt(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"div",42),c.TgZ(1,"button",9),c.NdJ("click",function(){c.CHM(e);const t=c.oxw();return t.isHblDetailsExpanded=!t.isHblDetailsExpanded}),c.TgZ(2,"mat-icon"),c._uU(3),c.qZA(),c.qZA(),c.TgZ(4,"div",43),c.NdJ("click",function(){c.CHM(e);const t=c.oxw();return t.isHblDetailsExpanded=!t.isHblDetailsExpanded}),c.TgZ(5,"h3",44),c._uU(6,"HBL Details"),c.qZA(),c.qZA(),c.qZA()}if(2&e){const e=c.oxw();c.xp6(3),c.Oqu(e.isHblDetailsExpanded?"navigate_next":"navigate_before")}}function rt(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"button",45),c.NdJ("click",function(){c.CHM(e);const t=c.oxw();return t.openContainerDetailsPopup(t.selectedContainer)}),c.TgZ(1,"mat-icon"),c._uU(2,"info"),c.qZA(),c._uU(3," Info \xa0\xa0"),c.qZA()}}function ut(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"button",45),c.NdJ("click",function(){return c.CHM(e),c.oxw().uploadPhoto()}),c._uU(1,"Upload Photo"),c.qZA()}}function gt(e,t){if(1&e&&(c.TgZ(0,"mat-form-field",33),c.TgZ(1,"mat-label"),c._uU(2,"Search"),c.qZA(),c._UZ(3,"input",34),c.qZA()),2&e){const e=c.oxw();c.xp6(3),c.Q6J("formControl",e.containerSearchFC)}}function pt(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"button",9),c.NdJ("click",function(){c.CHM(e);const t=c.oxw();return t.showMobileContainerSearch=!t.showMobileContainerSearch,t.containerSearchFC.setValue("")}),c.TgZ(1,"mat-icon"),c._uU(2,"close"),c.qZA(),c.qZA()}}function mt(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"button",46),c.NdJ("click",function(){c.CHM(e);const t=c.oxw();return t.showMobileContainerSearch=!t.showMobileContainerSearch}),c.TgZ(1,"mat-icon"),c._uU(2,"search"),c.qZA(),c._uU(3," Search \xa0\xa0"),c.qZA()}}function ht(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"button",46),c.NdJ("click",function(){c.CHM(e);const t=c.oxw();return t.openContainerScannerPopup(t.containerSearchFC,"container-mobile")}),c.TgZ(1,"mat-icon"),c._uU(2,"qr_code_scanner"),c.qZA(),c._uU(3," Scan \xa0\xa0"),c.qZA()}}function ft(e,t){if(1&e&&(c.TgZ(0,"mat-form-field",33),c.TgZ(1,"mat-label"),c._uU(2,"Search"),c.qZA(),c._UZ(3,"input",41),c.qZA()),2&e){const e=c.oxw();c.xp6(3),c.Q6J("formControl",e.hblSearchFC)}}function bt(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"button",9),c.NdJ("click",function(){c.CHM(e);const t=c.oxw();return t.showMobileHblSearch=!t.showMobileHblSearch,t.hblSearchFC.setValue("")}),c.TgZ(1,"mat-icon"),c._uU(2,"close"),c.qZA(),c.qZA()}}function Zt(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"button",35),c.NdJ("click",function(){c.CHM(e);const t=c.oxw();return t.showMobileHblSearch=!t.showMobileHblSearch}),c.TgZ(1,"mat-icon"),c._uU(2,"search"),c.qZA(),c._uU(3," Search \xa0\xa0"),c.qZA()}}function xt(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"button",46),c.NdJ("click",function(){c.CHM(e);const t=c.oxw();return t.openScannerPopup(t.hblSearchFC,"hbl-mobile")}),c.TgZ(1,"mat-icon"),c._uU(2,"qr_code_scanner"),c.qZA(),c._uU(3," Scan \xa0\xa0"),c.qZA()}}const wt=function(e,t){return{"w-50":e,"w-100":t}},_t=function(e,t){return{"w-50 d-flex":e,"d-none":t}},Ct=[{path:"",component:(()=>{class e{constructor(e){this.dialog=e,this.isContainerExpanded=!0,this.isHblExpanded=!1,this.isHblDetailsExpanded=!0,this.selectedContainer=null,this.selectedHbl=null,this.tabIndex=0,this.isContainerSearch=!1,this.isHblSearch=!1,this.containerSearchFC=new a.NI,this.hblSearchFC=new a.NI,this.showMobileContainerSearch=!1,this.showMobileHblSearch=!1}ngOnInit(){console.log("on inits")}containerSelected(e){console.log(e),this.selectedContainer=e,this.isContainerExpanded=!1,this.isHblExpanded=!0,this.tabIndex=1,this.selectedHbl=null}hblSelected(e){this.selectedHbl=e,this.tabIndex=2}openContainerDetailsPopup(e){this.dialog.open(v,{data:e}).disableClose=!0}openContainerScannerPopup(e,t){const n=this.dialog.open(f,{height:"450px",width:"400px"});n.disableClose=!0,n.afterClosed().subscribe(t=>{e.setValue(t),window.navigator.vibrate&&(window.navigator.vibrate(100),setTimeout(()=>{window.navigator.vibrate(0)},500))}),"container-mobile"===t&&(this.showMobileContainerSearch=!0),"container-desktop"===t&&(this.isContainerSearch=!0)}openScannerPopup(e,t){this.dialog.open(f,{height:"450px",width:"400px"}).afterClosed().subscribe(t=>{e.setValue(t),window.navigator.vibrate&&(window.navigator.vibrate(100),setTimeout(()=>{window.navigator.vibrate(0)},500))}),"hbl-mobile"===t&&(this.showMobileHblSearch=!0),"hbl-desktop"===t&&(this.isHblSearch=!0)}uploadPhoto(){const e=this.dialog.open(y,{width:"80%",height:"90%",data:{jobNo:this.jobNo}});e.componentInstance.job_no=this.jobNo,e.componentInstance.house_no=this.hblNumber,e.componentInstance.segment_code=this.selectedContainer.segment_code,e.componentInstance.source="M",e.componentInstance.selectedContainer=this.selectedContainer,e.componentInstance.selectedHbl="",e.componentInstance.subjob_no=0,e.afterClosed().subscribe(e=>{})}}return e.\u0275fac=function(t){return new(t||e)(c.Y36(s.uw))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-loading"]],decls:57,vars:45,consts:[[1,"d-flex","flex-column","w-100","h-100"],[1,"d-none","d-md-flex","flex-grow-1","overflow-auto","h-100"],[1,"d-flex","flex-column",3,"ngClass"],[1,"d-flex","px-3","py-2","align-items-center"],[1,"cfs-title1"],[1,"ml-auto"],["class","flex-grow-1",4,"ngIf"],["mat-icon-button","",3,"click",4,"ngIf"],["mat-raised-button","","color","primary",3,"click",4,"ngIf"],["mat-icon-button","",3,"click"],[1,"flex-grow-1","overflow-auto",3,"hidden","search","selectedRow"],["class","d-flex flex-column overflow-auto",3,"ngClass",4,"ngIf"],[3,"vertical"],[1,"flex-column","overflow-auto",3,"ngClass"],[1,"d-flex","px-3","py-2","align-items-center","shadow"],[1,"ml-auto",3,"click"],["mat-icon-button",""],[1,"flex-grow-1","overflow-auto",3,"selectedContainer","selectedHbl"],["class","d-flex flex-column",4,"ngIf"],[1,"d-flex","flex-column","d-md-none","h-100","w-100","overflow-auto"],["mat-stretch-tabs","",1,"h-100","devanning-mobile-tab-container","overflow-auto",3,"headerPosition","selectedIndex","selectedIndexChange"],["label","Container",1,"h-100","d-flex","flex-column","overflow-auto"],[1,"m-0","px-3","py-2","cfs-title1","shadow"],[1,"bg-white","border-top","p-2","d-flex","justify-content-center","align-items-center"],["class","mr-2","mat-raised-button","","color","primary",3,"click",4,"ngIf"],["mat-raised-button","","color","primary","class","mr-2",3,"click",4,"ngIf"],["class","ml-2","mat-raised-button","","color","primary",3,"click",4,"ngIf"],["mat-raised-button","","color","primary","class","ml-2",3,"click",4,"ngIf"],[1,"flex-grow-1","overflow-auto",3,"search","selectedRow"],["label","HBL"],[1,"flex-grow-1","overflow-auto",3,"selectedContainer","search","selectedRow"],["label","Details"],[1,"flex-grow-1",3,"selectedContainer","selectedHbl"],[1,"flex-grow-1"],["type","text","matInput","","placeholder","Search Container",3,"formControl"],["mat-raised-button","","color","primary",3,"click"],[1,"d-flex","flex-column","overflow-auto",3,"ngClass"],["class","cfs-title1",4,"ngIf"],["class","m-0",4,"ngIf"],["class","flex-grow-1 overflow-auto",3,"selectedContainer","search","selectedRow",4,"ngIf"],[1,"m-0"],["type","text","matInput","","placeholder","Search HBL",3,"formControl"],[1,"d-flex","flex-column"],[1,"d-flex","mx-auto",3,"click"],[1,"writing-mode-tb-rl","m-0"],["mat-raised-button","","color","primary",1,"mr-2",3,"click"],["mat-raised-button","","color","primary",1,"ml-2",3,"click"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0),c._UZ(1,"app-header"),c.TgZ(2,"div",1),c.TgZ(3,"div",2),c.TgZ(4,"div",2),c.TgZ(5,"div",3),c.TgZ(6,"div",4),c._uU(7),c.qZA(),c.TgZ(8,"div",5),c.YNc(9,Xe,4,1,"mat-form-field",6),c.YNc(10,Ke,3,1,"button",7),c.YNc(11,ze,3,0,"button",7),c.YNc(12,Ge,3,0,"button",7),c.YNc(13,et,2,0,"button",8),c.TgZ(14,"button",9),c.NdJ("click",function(){return t.isContainerExpanded=!t.isContainerExpanded}),c.TgZ(15,"mat-icon"),c._uU(16),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(17,"app-list-container-loading",10),c.NdJ("selectedRow",function(e){return t.containerSelected(e)}),c.qZA(),c.qZA(),c._UZ(18,"mat-divider"),c.YNc(19,st,12,12,"div",11),c.qZA(),c._UZ(20,"mat-divider",12),c.TgZ(21,"div",13),c.TgZ(22,"div",14),c.TgZ(23,"div",4),c._uU(24,"Stuffing Details"),c.qZA(),c.TgZ(25,"div",15),c.NdJ("click",function(){return t.isHblDetailsExpanded=!t.isHblDetailsExpanded}),c.TgZ(26,"button",16),c.TgZ(27,"mat-icon"),c._uU(28),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c._UZ(29,"app-hbl-detail-loading",17),c.qZA(),c.YNc(30,dt,7,1,"div",18),c.qZA(),c.TgZ(31,"div",19),c.TgZ(32,"mat-tab-group",20),c.NdJ("selectedIndexChange",function(e){return t.tabIndex=e}),c.TgZ(33,"mat-tab",21),c.TgZ(34,"div",22),c._uU(35,"Container "),c.qZA(),c.TgZ(36,"div",23),c.YNc(37,rt,4,0,"button",24),c.YNc(38,ut,2,0,"button",25),c.YNc(39,gt,4,1,"mat-form-field",6),c.YNc(40,pt,3,0,"button",7),c.YNc(41,mt,4,0,"button",26),c.YNc(42,ht,4,0,"button",27),c.qZA(),c.TgZ(43,"app-list-container-loading",28),c.NdJ("selectedRow",function(e){return t.containerSelected(e)}),c.qZA(),c.qZA(),c.TgZ(44,"mat-tab",29),c.TgZ(45,"div",22),c._uU(46,"HBL List"),c.qZA(),c.TgZ(47,"div",23),c.YNc(48,ft,4,1,"mat-form-field",6),c.YNc(49,bt,3,0,"button",7),c.YNc(50,Zt,4,0,"button",8),c.YNc(51,xt,4,0,"button",27),c.qZA(),c.TgZ(52,"app-list-hbl-loading",30),c.NdJ("selectedRow",function(e){return t.hblSelected(e)}),c.qZA(),c.qZA(),c.TgZ(53,"mat-tab",31),c.TgZ(54,"div",22),c._uU(55,"HBL Details"),c.qZA(),c._UZ(56,"app-hbl-detail-loading",32),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&e&&(c.xp6(3),c.Q6J("ngClass",c.WLB(35,wt,t.isHblDetailsExpanded,!t.isHblDetailsExpanded)),c.xp6(1),c.Q6J("ngClass",c.kEZ(38,ct,t.isContainerExpanded,t.isContainerExpanded&&!t.isHblExpanded,!t.isContainerExpanded)),c.xp6(3),c.Oqu(t.selectedContainer?"Container: "+(null==t.selectedContainer?null:t.selectedContainer.container_number):"Container"),c.xp6(2),c.Q6J("ngIf",t.isContainerSearch&&t.isContainerExpanded),c.xp6(1),c.Q6J("ngIf",t.isContainerExpanded),c.xp6(1),c.Q6J("ngIf",t.isContainerExpanded),c.xp6(1),c.Q6J("ngIf",t.selectedContainer),c.xp6(1),c.Q6J("ngIf",t.selectedContainer),c.xp6(3),c.Oqu(t.isContainerExpanded?"expand_less":"expand_more"),c.xp6(1),c.Q6J("hidden",!t.isContainerExpanded)("search",t.containerSearchFC.value),c.xp6(2),c.Q6J("ngIf",t.selectedContainer),c.xp6(1),c.Q6J("vertical",!0),c.xp6(1),c.Q6J("ngClass",c.WLB(42,_t,t.isHblDetailsExpanded,!t.isHblDetailsExpanded)),c.xp6(7),c.Oqu(t.isHblDetailsExpanded?"navigate_next":"navigate_before"),c.xp6(1),c.Q6J("selectedContainer",t.selectedContainer)("selectedHbl",t.selectedHbl),c.xp6(1),c.Q6J("ngIf",!t.isHblDetailsExpanded),c.xp6(2),c.Q6J("headerPosition","below")("selectedIndex",t.tabIndex),c.xp6(5),c.Q6J("ngIf",!t.showMobileContainerSearch&&t.selectedContainer||t.showMobileContainerSearch&&t.selectedContainer),c.xp6(1),c.Q6J("ngIf",!t.showMobileContainerSearch&&t.selectedContainer||t.showMobileContainerSearch&&t.selectedContainer),c.xp6(1),c.Q6J("ngIf",t.showMobileContainerSearch),c.xp6(1),c.Q6J("ngIf",t.showMobileContainerSearch),c.xp6(1),c.Q6J("ngIf",!t.showMobileContainerSearch),c.xp6(1),c.Q6J("ngIf",!t.showMobileContainerSearch),c.xp6(1),c.Q6J("search",t.containerSearchFC.value),c.xp6(5),c.Q6J("ngIf",t.showMobileHblSearch),c.xp6(1),c.Q6J("ngIf",t.showMobileHblSearch),c.xp6(1),c.Q6J("ngIf",!t.showMobileHblSearch),c.xp6(1),c.Q6J("ngIf",!t.showMobileHblSearch),c.xp6(1),c.Q6J("selectedContainer",t.selectedContainer)("search",t.hblSearchFC.value),c.xp6(4),c.Q6J("selectedContainer",t.selectedContainer)("selectedHbl",t.selectedHbl))},directives:[J.G,o.mk,o.O5,d.lW,N.Hw,te,ne.d,ke,Ie.SP,Ie.uX,We,r.KE,r.hX,ie.Nt,a.Fj,a.JJ,a.oH],styles:[".devanning-mobile-tab-container .mat-tab-body-wrapper{flex-grow:1}  .devanning-mobile-tab-container .mat-tab-body-content{display:flex;flex-direction:column}"]}),e})()}];let vt=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=c.oAB({type:e}),e.\u0275inj=c.cJS({imports:[[i.Bz.forChild(Ct)],i.Bz]}),e})();var Tt=n(4466),qt=n(2522),At=n(4885),Nt=n(2613),Ut=n(3935),kt=n(171);let It=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=c.oAB({type:e}),e.\u0275inj=c.cJS({providers:[C],imports:[[o.ez,vt,Tt.m,ne.t,qt.g0,N.Ps,d.ot,Ie.Nh,H.p0,At.Cq,M.Cv,O.QW,r.lN,ie.c,s.Is,a.u5,a.UX,Nt.Fk,Ut.Tx,u.LD,kt.To,q.ZX]]}),e})()}}]);